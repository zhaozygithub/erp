<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>对话框编辑区</title>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link href="/js/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript" src='/js/vue/vue.js'></script>
<script type="text/javascript" src='/js/jquery-3.2.0.min.js'></script>
<script type="text/javascript" src='/js/bootstrap-3.3.7-dist/js/bootstrap.min.js'></script>
<link rel='stylesheet/less' type="text/css" href='/css/xs.less'>
<script type="text/javascript" src='/js/bootstrap-3.3.7-dist/js/less.min.js'></script>
<link rel="stylesheet" type="text/css" href="/js/My97DatePicker/skin/WdatePicker.css">
<script language="javascript" type="text/javascript" src="/js/My97DatePicker/WdatePicker.js"></script>
<style type="text/css">
fieldset{max-width:800px;margin 5px auto;padding:3px;}
</style>
</head>
<body xclass="well" style='min-height:100%'>
#set(data=response.data)
#set(formFieldList=response.data.formFieldList)
<fieldset style id='fd'>
	<form action="#(data.submitUrl )" class='form-horizontal' style='padding:0 20px;' 
		method='post' id='mainform' 
		#for(input : formFieldList)
		#if(input.type=='file')enctype="multipart/form-data" #break
		#end
		#end
		 onsubmit='return checknotnull()'>
	#for(input : formFieldList)
	<div class="form-group" style='display:#(input.type=="hidden"?"none":"");'>
	<label class=' xs2  control-label input-label'>#(input.text  )</label>
	<div class=" xs9">   
	<div class="col-xs-10">  
	#if(input.type!="select")
		#if(input.type=="radio")
		 	#for(option : input.options)
		 		<span style='padding:0 20px　0　0;'>#(option.item_name)<input v-for type='#(input.type)' name='#(input.filedName  )' value='#(option.item_no)' 
		 		 #(option.item_no==input.defaultValue?"checked":"") necessity='#(input.isRequired)'>
		 		</span>
	    	#end ###for
	 	#elseif(input.type=="textarea")
	 		<textarea rows="6" cols="" name='#(input.filedName  )' class="form-control"  
	 			title='#(input.hint)' placeholder='#(input.inNotice)' necessity='#(input.isRequired)'>#(input.defaultValue)</textarea>
	 	#elseif(input.type=="date")
	 		<input  type='#(input.type)' name='#(input.filedName  )' value='#(option.item_no)' 
	 		 title='#(input.hint)' placeholder='#(input.inNotice)'  necessity='#(input.isRequired)'
	 		 class="Wdate form-control"  onClick="WdatePicker()">
	 	#else
	       <input v-for type='#(input.type=="datetime"?"datetime-local":input.type)' name='#(input.filedName  )' 
	       value='#(input.defaultValue)' title='#(input.hint)' placeholder='#(input.inNotice)'  necessity='#(input.isRequired)'
		 class='#(input.type=="radio"?"":"form-control")' >
    	#end ###if
	#else
	<select class="form-control"  name='#(input.filedName  )' 
	       value='#(input.defaultValue)' title='#(input.hint)' placeholder='#(input.inNotice)'  necessity='#(input.isRequired)'>
	       <option value="">--请选择--</option>
	       #for(option : input.options)
			<option value="#(option.item_no)" #(option.item_no==input.defaultValue?"selected":"")>#(option.item_name)</option>
			#end</select>
	#end	
	</div>
	 
	#if(input.isRequired)
	<label class=" col-xs-1 control-label input-label" style='color:red;'>*</label>
	#end 
	</div>
	</div>
	#end
	  <div class="form-group">
            <div class="col-xs-8 col-xs-offset-2">
			<button class="btn btn-primary  " style="padding:6px 22px;margin:1px 10px;" type='submit'>提交</button>
			<button class="btn btn-primary  " style="padding:6px 22px;margin:1px 10px;" type='reset'>复原</button>
			</div>
        </div>  
	</form>
</fieldset>
</body>
<script type="text/javascript">
wintitle='#(response.data.formName)';
var mainform=document.getElementById('mainform');
if(wintitle!=null&&wintitle!='')
	try{parent.document.getElementById('wintitle').innerHTML=wintitle;}catch(e){console.log(e);}
function checknotnull(){
	//var mainform=document.getElementById('mainform');
	var i=0;
	var inp=mainform.getElementsByTagName('input');
	for( i=0;i<inp.length;i++){
		if(inp[i].getAttribute('necessity')=='true'&&(inp[i].value==null||inp[i].value=='')){
			alert('标红星号的字段不可为空!');
			return false;
		}
	}
	inp=mainform.getElementsByTagName('select');
	for( i=0;i<inp.length;i++){
		if(inp[i].getAttribute('necessity')=='true'&&(inp[i].value==null||inp[i].value=='')){
			alert('标红星号的字段不可为空!');
			return false;
		}
	}
}
//如果之前选中了某行,可执行此函数对表单进行赋值 
(function initdata(){
	if(!parent.select_user)
		return;
	for(k in select_user){
		try{var el=mainform.getElementsByName(k);
		if(el.type!='radio'||el.type!='checkbox')el.value=select_user[k];
		else //if(el.value==select_user[k])
			el.checked=(el.value==select_user[k]);
		}catch(e){}
	}
})()
</script>
</html>